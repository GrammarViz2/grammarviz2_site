<!DOCTYPE html>
<html>
<head>
  <title> Time series anomaly detection using GrammarViz 2.0 CLI (command line interface) | GrammarViz 2.0 </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">

  <!--  Load bootswatch-based Morea theme file. -->
  <link rel="stylesheet" href="/grammarviz2_site/css/themes/flatly/bootstrap.min.css">
  <link rel="stylesheet" href="/grammarviz2_site/css/style.css">
  <link rel="stylesheet" href="/grammarviz2_site/css/syntax.css">
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Open+Sans:normal,italic,bold">
  <link rel="shortcut icon" href="/grammarviz2_site/favicon.ico" type="image/x-icon" />

  <!--  Load LaTeX processing stuff. -->
  <script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});</script>
  <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  <!--  Google check-up. -->
  <meta name="google-site-verification" content="IPRp9YV-GjZISFj5du9xbjjiTWKkc9Rpwb3_md6PIe8" />

  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.2/html5shiv.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/respond.js/1.2.0/respond.js"></script>
  <![endif]-->

  <!-- Load Bootstrap JavaScript components -->
  <!-- <script src="http://code.jquery.com/jquery.min.js"></script> -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
</head>
<body>
<!-- Responsive navbar -->
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <!--  Display three horizontal lines when navbar collapsed. -->
        <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/grammarviz2_site/index.html"> GrammarViz 2.0 </a>
    </div>
    <div class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        <li><a href="/grammarviz2_site/modules/">Modules</a></li>
        <!--  -->
        
          <li><a href="/grammarviz2_site/readings/">Readings</a></li>
        
        
          <li><a href="/grammarviz2_site/experiences/">Experiences</a></li>
        
        <!--  -->
      </ul>
    </div>
  </div>
</div>


<div class="container">
  <h3 id="experiential-learning-2">Experiential Learning 2</h3>

<h2 id="anomaly-discovery-with-grammarviz-20-using-command-line-interface">Anomaly discovery with GrammarViz 2.0 using command line interface</h2>

<h3 id="introduction">1. Introduction</h3>
<p>In this module we discuss an anomaly detection using QTDB 0606 ECG dataset. This data set (database record) can be downloaded from <a href="http://physionet.org/physiobank/database/qtdb/">PHYSIONET FTP</a> and converted into the text format by executing this command</p>
<pre>
rdsamp -r sele0606 -f 120.000 -l 60.000 -p -c | sed -n '701,3000p' &gt;0606.csv
</pre>
<p>in the linux shell (assuming that you have rdsamp installed at your system).
We use the second column of this file. This is our dataset overview:</p>

<div class="container">
  <div class="row">
    <div class="col-sm-8">
      <img style="margin-top: 5px; margin-bottom: 5px" src="../assets/qtdb0606.png" width="800px" class="img-responsive center-block" />
    </div>
  </div>
</div>

<p>We know, that third heartbeat of this dataset contains the true anomaly as it was discussed in <a href="http://www.cs.gmu.edu/~jessica/publications/discord_icdm05.pdf">HOTSAX paper by Eamonn Keogh, Jessica Lin, and Ada Fu</a>. Note, that the authors were specifically interested in finding anomalies which are shorter than a regular heartbeat following a suggestion given by the domain expert: “<em>… We conferred with cardiologist, Dr. Helga Van Herle M.D., who informed us that heart irregularities can sometimes manifest themselves at scales significantly shorter than a single heartbeat….</em>”
Figure 13 of the paper further explains the nature of this true anomaly:</p>

<div class="container">
  <div class="row">
    <div class="col-sm-8">
      <img style="margin-top: 5px; margin-bottom: 5px" src="../assets/demo-ecg0606_cluster.png" width="400px" class="img-responsive center-block" />
    </div>
  </div>
</div>

<h2 id="running-grammarviz-20-using-cli-interface">2. Running GrammarViz 2.0 using CLI interface</h2>
<p>Note, that by default, the GrammarViz 2.0 jar file is configured to launch GUI.
In contrast, in this tutorial, we will be using command line.
Here is an example of running GrammarViz 2.0 anomaly discovery module using CLI:</p>

<pre>
$ java -cp "grammarviz20.jar" edu.hawaii.jmotif.discord.GrammarVizDiscord
14:15:01.885 [main] INFO  e.h.jmotif.discord.GrammarVizDiscord - Parameters string: "[]"
GrammarViz2 v. 1.0 release, contact: seninp@gmail.com
Expected parameters: 
 [1] algorithm to use: 1 - brute force, 2 - HOT SAX, backed by a Trie
                       3 - RRA algorithm, 4 - HOT SAX backed by a Hash
     *** for algorithm 2, PAA size will be equal to Alphabet size due to the *trie* design
         use algorithm 4 so PAA and Alphabet sizes may differ
     *** for brute force only sliding window parameter is expected 
 [2] dataset input file; 
 [3] window size; 
 [4] paa size; 
 [5] alphabet size; 
 [6] discords number to report; 
 [7] indicate true/false for RRA algorithm auxiliary output; 
</pre>

<p>As shown, the code prints a help output expecting a number of parameters to be specified. The expected parameters and their order are:</p>

<ol>
  <li>The algorithm switch.</li>
  <li>The dataset name.</li>
  <li>The first discretization parameter: sliding window size.</li>
  <li>The second discretization parameter: PAA (piecewise aggregate approximation) size parameter.</li>
  <li>The third discretization parameter: alphabet size.</li>
  <li>The number of discords to report (each new discord discovery can be expensive!).</li>
  <li>A semaphore configuring the output. </li>
</ol>

<h3 id="brute-force-discord-discovery">2.1. Brute-force discord discovery</h3>
<p>So, let’s find discords in our dataset using the brute-force discord search
(<em>note, that brute-force technique doesn’t need any discretization parameters, only a sliding window size, but placeholders need to be in CLI anyway.
I use <strong>1</strong> as a placeholder for PAA, and alphabet sizes.</em>):</p>

<pre>
$ java -cp "grammarviz20.jar" edu.hawaii.jmotif.discord.GrammarVizDiscord 1 data/ecg0606_1.csv 100 1 1 3
14:30:44.930 [main] INFO  e.h.jmotif.discord.GrammarVizDiscord - Parameters string: "[1, data/ecg0606_1.csv, 100, 1, 1, 3]"
14:30:44.933 [main] INFO  e.h.jmotif.discord.GrammarVizDiscord - Parsing param string "[1, data/ecg0606_1.csv, 100, 1, 1, 3]"
14:30:44.933 [main] INFO  e.h.jmotif.discord.GrammarVizDiscord - reading from data/ecg0606_1.csv
14:30:44.979 [main] INFO  e.h.jmotif.discord.GrammarVizDiscord - loaded 2299 points from 2299 lines in data/ecg0606_1.csv
14:30:44.980 [main] INFO  e.h.jmotif.discord.GrammarVizDiscord - Starting discords search with settings: algorithm 1, data "data/ecg0606_1.csv", window 100, PAA 1, alphabet 1, reporting 3 discords.
14:30:44.980 [main] INFO  e.h.jmotif.discord.GrammarVizDiscord - running brute force algorithm...
14:30:44.983 [main] DEBUG edu.hawaii.jmotif.timeseries.TSUtils - currently known discords: 0 out of 3
14:30:46.189 [main] DEBUG edu.hawaii.jmotif.timeseries.TSUtils - best discord found at 411, best distance: 1.5045846602966542, in 0h 0m 1s 200ms distance calls: 4203050
14:30:46.190 [main] DEBUG edu.hawaii.jmotif.timeseries.TSUtils - position 411, NN distance 1.5045846602966542, elapsed time: 0h 0m 1s 206ms, distance calls: 4203050
14:30:46.190 [main] DEBUG edu.hawaii.jmotif.timeseries.TSUtils - currently known discords: 1 out of 3
14:30:47.031 [main] DEBUG edu.hawaii.jmotif.timeseries.TSUtils - best discord found at 37, best distance: 0.4787744771810631, in 0h 0m 0s 841ms distance calls: 3603050
14:30:47.032 [main] DEBUG edu.hawaii.jmotif.timeseries.TSUtils - position 37, NN distance 0.4787744771810631, elapsed time: 0h 0m 0s 842ms, distance calls: 3603050
14:30:47.032 [main] DEBUG edu.hawaii.jmotif.timeseries.TSUtils - currently known discords: 2 out of 3
14:30:47.819 [main] DEBUG edu.hawaii.jmotif.timeseries.TSUtils - best discord found at 539, best distance: 0.44370598373247144, in 0h 0m 0s 787ms distance calls: 3324000
14:30:47.819 [main] DEBUG edu.hawaii.jmotif.timeseries.TSUtils - position 539, NN distance 0.44370598373247144, elapsed time: 0h 0m 0s 787ms, distance calls: 3324000
discord #0 "#0", at 411 distance to closest neighbor: 1.5045846602966542, info string: "position 411, NN distance 1.5045846602966542, elapsed time: 0h 0m 1s 206ms, distance calls: 4203050"
discord #1 "#1", at 37 distance to closest neighbor: 0.4787744771810631, info string: "position 37, NN distance 0.4787744771810631, elapsed time: 0h 0m 0s 842ms, distance calls: 3603050"
discord #2 "#2", at 539 distance to closest neighbor: 0.44370598373247144, info string: "position 539, NN distance 0.44370598373247144, elapsed time: 0h 0m 0s 787ms, distance calls: 3324000"
3 discords found in 0h 0m 2s 840ms
</pre>

<p>about 1.2 seconds later the code reports the best discord at the position 411:</p>

<div class="container">
  <div class="row">
    <div class="col-sm-8">
      <img style="margin-top: 5px; margin-bottom: 5px" src="../assets/ecg0606_brute_force100.png" width="800px" class="img-responsive center-block" />
    </div>
  </div>
</div>

<h3 id="hot-saxhttpwwwcsucredueamonndiscords-driven-discords-discovery">2.2. <a href="http://www.cs.ucr.edu/~eamonn/discords/">HOT-SAX</a>-driven discords discovery.</h3>
<p>Now let’s use HOT-SAX algorithm to find discords:</p>

<pre>
$ java -cp "grammarviz20.jar" edu.hawaii.jmotif.discord.GrammarVizDiscord 2 data/ecg0606_1.csv 100 3 3 3 
15:21:26.112 [main] INFO  e.h.jmotif.discord.GrammarVizDiscord - Parameters string: "[2, data/ecg0606_1.csv, 100, 3, 3, 3]"
15:21:26.115 [main] INFO  e.h.jmotif.discord.GrammarVizDiscord - Parsing param string "[2, data/ecg0606_1.csv, 100, 3, 3, 3]"
15:21:26.115 [main] INFO  e.h.jmotif.discord.GrammarVizDiscord - reading from data/ecg0606_1.csv
15:21:26.151 [main] INFO  e.h.jmotif.discord.GrammarVizDiscord - loaded 2299 points from 2299 lines in data/ecg0606_1.csv
15:21:26.151 [main] INFO  e.h.jmotif.discord.GrammarVizDiscord - Starting discords search with settings: algorithm 2, data "data/ecg0606_1.csv", window 100, PAA 3, alphabet 3, reporting 3 discords.
15:21:26.151 [main] INFO  e.h.jmotif.discord.GrammarVizDiscord - running HOT SAX Trie-based algorithm...
15:21:26.159 [main] INFO  edu.hawaii.jmotif.sax.SAXFactory - Trie built in : 0h 0m 0s 3ms
discord #0 "cab", at 411 distance to closest neighbor: 1.5045846602966542, info string: "position 411, NN distance 1.5045846602966542, elapsed time: 0h 0m 0s 184ms, distance calls: 96050"
discord #1 "aac", at 37 distance to closest neighbor: 0.4787744771810631, info string: "position 37, NN distance 0.4787744771810631, elapsed time: 0h 0m 0s 245ms, distance calls: 231561"
discord #2 "acb", at 539 distance to closest neighbor: 0.44370598373247144, info string: "position 539, NN distance 0.44370598373247144, elapsed time: 0h 0m 0s 246ms, distance calls: 254786"

Discords found in 0h 0m 0s 764ms
</pre>

<p>in less than a second HOT-SAX finds exactly the same discords.</p>

<h3 id="rare-rule-anomaly-rra--driven-discords-discovery">2.3. Rare Rule Anomaly (RRA) -driven discords discovery.</h3>
<p>Now let’s use our new technique:</p>

<pre>
$ java -cp "grammarviz20.jar" edu.hawaii.jmotif.discord.GrammarVizDiscord 3 data/ecg0606_1.csv 100 3 3 3 
15:25:01.485 [main] INFO  e.h.jmotif.discord.GrammarVizDiscord - Parameters string: "[3, data/ecg0606_1.csv, 100, 3, 3, 3]"
15:25:01.488 [main] INFO  e.h.jmotif.discord.GrammarVizDiscord - Parsing param string "[3, data/ecg0606_1.csv, 100, 3, 3, 3]"
15:25:01.488 [main] INFO  e.h.jmotif.discord.GrammarVizDiscord - reading from data/ecg0606_1.csv
15:25:01.525 [main] INFO  e.h.jmotif.discord.GrammarVizDiscord - loaded 2299 points from 2299 lines in data/ecg0606_1.csv
15:25:01.526 [main] INFO  e.h.jmotif.discord.GrammarVizDiscord - Starting discords search with settings: algorithm 3, data "data/ecg0606_1.csv", window 100, PAA 3, alphabet 3, reporting 3 discords.
15:25:01.526 [main] INFO  e.h.jmotif.discord.GrammarVizDiscord - running RRA algorithm...
15:25:01.590 [main] INFO  e.h.jmotif.discord.GrammarVizDiscord - Whole timeseries covered by rule intervals ...
params: [3, data/ecg0606_1.csv, 100, 3, 3, 3]
discord #0 "pos,calls,len,rule 417 15235 110 8", at 417 distance to closest neighbor: 0.013448785622157254, info string: "position 417, length 110, NN distance 0.013448785622157254, elapsed time: 0h 0m 0s 71ms, distance calls: 15235"
discord #1 "pos,calls,len,rule 2082 42574 111 32", at 2082 distance to closest neighbor: 0.004159294671527497, info string: "position 2082, length 111, NN distance 0.004159294671527497, elapsed time: 0h 0m 0s 78ms, distance calls: 42574"
discord #2 "pos,calls,len,rule 1572 36689 109 28", at 1572 distance to closest neighbor: 0.004090035435808949, info string: "position 1572, length 109, NN distance 0.004090035435808949, elapsed time: 0h 0m 0s 59ms, distance calls: 36689"

Discords found in 0h 0m 0s 278ms
</pre>

<p>in half time of that of HOT-SAX we find the same true best discord:</p>

<div class="container">
  <div class="row">
    <div class="col-sm-8">
      <img style="margin-top: 5px; margin-bottom: 5px" src="../assets/ecg0606_RRA.png" width="800px" class="img-responsive center-block" />
    </div>
  </div>
</div>

<p>two next anomalies, however, are different from brute force and HOT-SAX runs.</p>

<h2 id="auxiliary-files">3. Auxiliary files</h2>
<p>If we add the seventh parameter to the CLI command:</p>

<pre>
$ java -cp "grammarviz20.jar" edu.hawaii.jmotif.discord.GrammarVizDiscord 3 data/ecg0606_1.csv 100 3 3 3 true
</pre>

<p>the code produces two files: <code>distances.txt</code> and <code>coverage.txt</code>.</p>

<h3 id="distancestxt">3.1 <code>distances.txt</code></h3>
<p>This files consists of three columns:</p>

<ol>
  <li>The time series position.</li>
  <li>The distance to closest non-self match.</li>
  <li>The subsequence length.</li>
</ol>

<p>Something like this:</p>

<pre>
$ head distances.txt
0,0.4839679741470506,126.0
1,0.0,0.0
2,0.0,0.0
...
</pre>

<p>By using this file we can visually inspect how the discovered by RRA discord is rated among other subsequences.
Here is the <a href="http://cran.r-project.org/">R</a> code we use (note that you’d need the <a href="http://ggplot2.org/">ggplot2</a> and Cairo libs installed too):</p>

<pre>
data=read.csv(file="../data/ecg0606_1.csv",header=F,sep=",")
distances=read.csv(file="../distances.txt",header=F,sep=",")
df=data.frame(time=c(1:length(data$V1)),value=distances$V2,width=distances$V3)
(pd &lt;- ggplot(df, aes(time, value)) + geom_line(color="red") + theme_bw() +
  ggtitle("Non-self distance to the nearest neighbor among subsequences corresponding to Sequitur rules") + 
  theme(plot.title = element_text(size = rel(1.5)), axis.title.x = element_blank(),axis.title.y=element_blank(),
        axis.ticks.y=element_blank(),axis.text.y=element_blank())
)
CairoPNG(file = "ecg0606_distances.png", width = 800, height = 200, pointsize = 12, bg = "white")
print(pd)
dev.off()
</pre>

<p>and which produces the next figure:</p>

<div class="container">
  <div class="row">
    <div class="col-sm-8">
      <img style="margin-top: 5px; margin-bottom: 5px" src="../assets/ecg0606_distances.png" width="800px" class="img-responsive center-block" />
    </div>
  </div>
</div>

<h3 id="coveragetxt">3.2 <code>coverage.txt</code></h3>
<p>This file is a single column file that contains exactly the amount of lines as the input file and reflects the <strong>rule density curve</strong>.
Here is the way to visualize this curve using R:</p>

<pre>
density=read.csv(file="../coverage.txt",header=F,sep=",")
density_df=data.frame(time=c(1:length(density$V1)),value=density$V1)
shade &lt;- rbind(c(0,0), density_df, c(2229,0))
names(shade)&lt;-c("x","y")
(pc &lt;- ggplot(density_df, aes(x=time,y=value)) +
  geom_line(col="cyan2") + theme_bw() +
  geom_polygon(data = shade, aes(x, y), fill="cyan", alpha=0.5) +
  ggtitle("Sequitur rules density for (w=100,p=3,a=3)") + 
  theme(plot.title = element_text(size = rel(1.5)), axis.title.x = element_blank(),
        axis.title.y=element_blank(),axis.ticks.y=element_blank(),axis.text.y=element_blank()))
CairoPNG(file = "ecg0606_density1.png",
         width = 800, height = 200, pointsize = 12, bg = "white")
print(pc)
dev.off()
</pre>

<div class="container">
  <div class="row">
    <div class="col-sm-8">
      <img style="margin-top: 5px; margin-bottom: 5px" src="../assets/ecg0606_density1.png" width="800px" class="img-responsive center-block" />
    </div>
  </div>
</div>

<p>As shown above, the rule-density curve does not identify the anomaly clearly.
This is a <strong>typical density curve behavior</strong> when the SAX approximation is loose – consider the figure below which shows that the area where the successful
discovery of this true anomaly with Density Curve approach is twice as small as the area of RRA success:</p>

<div class="container">
  <div class="row">
    <div class="col-sm-8">
      <img style="margin-top: 5px; margin-bottom: 5px" src="../assets/ecg0606_areas.png" width="800px" class="img-responsive center-block" />
    </div>
  </div>
</div>

<p>If we increase values for PAA and Alphabet discretization coefficients from 3 to 5, the situation improves significantly – not only the true anomaly
becomes clearly articulated by the drop in rule density curve, but <strong>all</strong> the RRA discords now coincide with those reported by brute force and HOT-SAX algorithms:</p>

<pre>
$ java -cp "grammarviz20.jar" edu.hawaii.jmotif.discord.GrammarVizDiscord 3 data/ecg0606_1.csv 100 5 5 3 true
15:49:08.765 [main] INFO  e.h.jmotif.discord.GrammarVizDiscord - Parameters string: "[3, data/ecg0606_1.csv, 100, 5, 5, 3, true]"
15:49:08.768 [main] INFO  e.h.jmotif.discord.GrammarVizDiscord - Parsing param string "[3, data/ecg0606_1.csv, 100, 5, 5, 3, true]"
15:49:08.768 [main] INFO  e.h.jmotif.discord.GrammarVizDiscord - reading from data/ecg0606_1.csv
15:49:08.807 [main] INFO  e.h.jmotif.discord.GrammarVizDiscord - loaded 2299 points from 2299 lines in data/ecg0606_1.csv
15:49:08.807 [main] INFO  e.h.jmotif.discord.GrammarVizDiscord - Starting discords search with settings: algorithm 3, data "data/ecg0606_1.csv", window 100, PAA 5, alphabet 5, reporting 3 discords.
15:49:08.807 [main] INFO  e.h.jmotif.discord.GrammarVizDiscord - running RRA algorithm...
15:49:08.946 [main] INFO  e.h.jmotif.discord.GrammarVizDiscord - Whole timeseries covered by rule intervals ...
params: [3, data/ecg0606_1.csv, 100, 5, 5, 3, true]
discord #0 "pos,calls,len,rule 406 19051 114 25", at 406 distance to closest neighbor: 0.013228247590601405, info string: "position 406, length 114, NN distance 0.013228247590601405, elapsed time: 0h 0m 0s 91ms, distance calls: 19051"
discord #1 "pos,calls,len,rule 34 85651 112 77", at 34 distance to closest neighbor: 0.004952943427593215, info string: "position 34, length 112, NN distance 0.004952943427593215, elapsed time: 0h 0m 0s 129ms, distance calls: 85651"
discord #2 "pos,calls,len,rule 531 111391 102 28", at 531 distance to closest neighbor: 0.0043192923082177835, info string: "position 531, length 102, NN distance 0.0043192923082177835, elapsed time: 0h 0m 0s 144ms, distance calls: 111391"

Discords found in 0h 0m 0s 508ms
</pre>

<div class="container">
  <div class="row">
    <div class="col-sm-8">
      <img style="margin-top: 5px; margin-bottom: 5px" src="../assets/ecg0606_density2.png" width="800px" class="img-responsive center-block" />
    </div>
  </div>
</div>

<h2 id="discussion">4. Discussion.</h2>
<p>We discussed two new ways to discover time series anomaly (i.e., discord) – the Rare Rule Anomaly (RRA) algorithm and the rule density curve.
As shown, the RRA algorithm is faster than other discord discovery techniques, namely brute-force and HOT-SAX.
In addition, we have shown that the approximation degree is crucial for the optimal performance of RRA and rule density curve algorithms.</p>

<h2 id="the-r-code-to-combine-all-three-plots-into-a-nice-figure">5. The R code to combine all three plots into a nice figure.</h2>

<div class="container">
  <div class="row">
    <div class="col-sm-8">
      <img style="margin-top: 5px; margin-bottom: 5px" src="../assets/ecg0606_three_plots.png" width="800px" class="img-responsive center-block" />
    </div>
  </div>
</div>

<pre>
# libs!
require(Cairo)
require(ggplot2)
require(grid)
require(gridExtra)
#
data=read.csv(file="../data/ecg0606_1.csv",header=F,sep=",")
plot(data$V1,t="l")
#
df=data.frame(time=c(1:length(data$V1)),value=data$V1)
(p &lt;- ggplot(df, aes(time, value)) + geom_line(lwd=0.65,color="blue1") +
  ggtitle("Dataset ECG qtdb 0606 [701-3000] and the best RRA discord") + 
  theme(plot.title = element_text(size = rel(1.5)), axis.title.x = element_blank(),axis.title.y=element_blank(),
        axis.ticks.y=element_blank(),axis.text.y=element_blank())
)  
red_line=df[406:(406+114),]
p = p + geom_line(data=red_line,col="red", lwd=1.6)
CairoPNG(file = "ecg0606_RRA.png",
         width = 800, height = 200, pointsize = 12, bg = "white")
print(p)
dev.off()

#
data=read.csv(file="../data/ecg0606_1.csv",header=F,sep=",")
distances=read.csv(file="../distances.txt",header=F,sep=",")
df=data.frame(time=c(1:length(data$V1)),value=distances$V2,width=distances$V3)
pd &lt;- ggplot(df, aes(time, value)) + geom_line(color="red") + theme_bw() +
  ggtitle("Non-self distance to the nearest neighbor among subsequences corresponding to Sequitur rules") + 
  theme(plot.title = element_text(size = rel(1.5)), axis.title.x = element_blank(),axis.title.y=element_blank(),
        axis.ticks.y=element_blank(),axis.text.y=element_blank())
pd  
CairoPNG(file = "ecg0606_distances.png",
         width = 800, height = 200, pointsize = 12, bg = "white")
print(pd)
dev.off()

#
density=read.csv(file="../coverage.txt",header=F,sep=",")
density_df=data.frame(time=c(1:length(density$V1)),value=density$V1)
shade &lt;- rbind(c(0,0), density_df, c(2229,0))
names(shade)&lt;-c("x","y")
(pc &lt;- ggplot(density_df, aes(x=time,y=value)) +
  geom_line(col="cyan2") + theme_bw() +
  geom_polygon(data = shade, aes(x, y), fill="cyan", alpha=0.5) +
  ggtitle("Sequitur rules density for ECG qtdb 0606 (w=100,p=5,a=5)") + 
  theme(plot.title = element_text(size = rel(1.5)), axis.title.x = element_blank(),
        axis.title.y=element_blank(),axis.ticks.y=element_blank(),axis.text.y=element_blank()))
CairoPNG(file = "ecg0606_density2.png",
         width = 800, height = 300, pointsize = 12, bg = "white")
print(pc)
dev.off()
#
CairoPNG(file = "ecg0606_three_plots.png",
         width = 800, height = 600, pointsize = 12, bg = "white")
print(arrangeGrob(p,pd,pc,ncol=1))
dev.off()
</pre>

</div>



<div class="footer-background">
<footer>
  <div class="container page-footer">
    
      <p>Continuous Integration:&nbsp;&nbsp; <a href="https://travis-ci.org/GrammarViz2/grammarviz2_src"><img src="https://travis-ci.org/GrammarViz2/grammarviz2_src.svg?branch=master" /> (master)</a></p>
<p>Contact: <a href="http://www2.hawaii.edu/~senin">Pavel Senin,</a> <a href="mailto:#">seninp@gmail.com</a><br /></p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54135903-1', 'auto');
  ga('send', 'pageview');
</script>

<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=10360660; 
var sc_invisible=1; 
var sc_security="391036a7"; 
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>

<noscript><div class="statcounter"><a title="shopify site
analytics" href="http://statcounter.com/shopify/" target="_blank"><img class="statcounter" src="http://c.statcounter.com/10360660/0/391036a7/1/" alt="shopify site analytics" /></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->

    
    <p style="margin: 0">Powered by the <a href="http://morea-framework.github.io/">Morea Framework</a> (Theme: flatly)<br>
       Last update on: <span>2015-04-07 08:20:10 +0200</span></p>
    <p style="margin: 0">
      2 modules
      <!--  -->
      
        | 3 readings
      
      
        | 3 experiences
      
      <!--  -->
    </p>
  </div>
</footer>
</div>
</body>
</html>
